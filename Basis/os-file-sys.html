<!-- HTML/os-file-sys.html -->

<!-- COPYRIGHT (c) 1997 Bell Labs, Lucent Technologies. -->

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>The OS.FileSys structure</TITLE>
<META NAME=generator CONTENT="ML-Doc::html-gen">
</HEAD>
<BODY BGCOLOR="#FFFFFF"><A NAME="top"></A>
<H1 align=CENTER>The Standard ML Basis Library</H1>
<HR>


<H2><A NAME="section:0"></A>The <CODE>OS.FileSys</CODE> structure</H2>
<HR>
<H4>Synopsis</H4>
<BLOCKQUOTE>
<CODE><B>signature</B>&nbsp;<A NAME="OS_FILE_SYS:SIG:SPEC"></A><CODE>OS_FILE_SYS</CODE><BR>
<B>structure</B>&nbsp;<A NAME="FileSys:STR:SPEC"></A><CODE>FileSys</CODE><B> : </B>OS_FILE_SYS<BR>
</CODE>
</BLOCKQUOTE>
<P>
 The <CODE>OS.FileSys</CODE> structure provides facilities for accessing and operating on the file system. These functions are designed to be portable across operating systems. They raise  <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">OS.SysErr</A></CODE> with an argument in case of errors. 
<P>
Except for <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.fullPath:VAL:SPEC">fullPath</A></CODE> and <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.realPath:VAL:SPEC">realPath</A></CODE>, functions taking a string argument will raise the <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">OS.SysErr</A></CODE> exception if the argument string is empty. 
<P>
It is expected that all functions taking a pathname as an argument (<I>e.g.</I>, <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.modTime:VAL:SPEC">modTime</A></CODE> or  <CODE><A HREF="os-process.html#SIG:OS_PROCESS.system:VAL:SPEC">OS.Process.system</A></CODE>) will resolve any components corresponding to symbolic links. The obvious exceptions to this rule are <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.isLink:VAL:SPEC">isLink</A></CODE> and  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.readLink:VAL:SPEC">readLink</A></CODE>, where only symbolic links appearing as directory components of the pathname are resolved.  
<BLOCKQUOTE>
<B>Question:</B><BR>

<P>
We need a general discussion of dirstreams, working directory, directory structure, etc. The introduction should say something about the model of a file system that these functions use; what features they support and what examples of features that require an OS-specific library. We should also note that the particular semantics, especially concerning errors, is OS dependent.
</BLOCKQUOTE>
 
<HR>
<H4>Interface</H4>
<BLOCKQUOTE>
<CODE><B>type</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.dirstream:TY:SPEC" HREF="#SIG:OS_FILE_SYS.dirstream:TY">dirstream</A><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.openDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.openDir:VAL">openDir</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;dirstream<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.readDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.readDir:VAL">readDir</A>&nbsp;<B>:</B>&nbsp;dirstream&nbsp;<B>-&gt;</B>&nbsp;string&nbsp;option<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.rewindDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.rewindDir:VAL">rewindDir</A>&nbsp;<B>:</B>&nbsp;dirstream&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.closeDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.closeDir:VAL">closeDir</A>&nbsp;<B>:</B>&nbsp;dirstream&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.chDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.chDir:VAL">chDir</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.getDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.getDir:VAL">getDir</A>&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;string<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.mkDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.mkDir:VAL">mkDir</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.rmDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.rmDir:VAL">rmDir</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.isDir:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.isDir:VAL">isDir</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;bool<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.isLink:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.isLink:VAL">isLink</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;bool<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.readLink:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.readLink:VAL">readLink</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;string<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.fullPath:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.fullPath:VAL">fullPath</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;string<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.realPath:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.realPath:VAL">realPath</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;string<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.modTime:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.modTime:VAL">modTime</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;Time.time<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.fileSize:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.fileSize:VAL">fileSize</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.setTime:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.setTime:VAL">setTime</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>*</B>&nbsp;Time.time&nbsp;option&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.remove:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.remove:VAL">remove</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.rename:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.rename:VAL">rename</A>&nbsp;<B>:</B>&nbsp;{old&nbsp;<B>:</B>&nbsp;string,&nbsp;new&nbsp;<B>:</B>&nbsp;string}&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<BR>
<B>datatype</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.access_mode:TY:SPEC" HREF="#SIG:OS_FILE_SYS.access_mode:TY">access_mode</A>&nbsp;=&nbsp;<A NAME="SIG:OS_FILE_SYS.A_READ:TY:SPEC" HREF="#SIG:OS_FILE_SYS.A_READ:TY">A_READ</A>&nbsp;|&nbsp;<A NAME="SIG:OS_FILE_SYS.A_WRITE:TY:SPEC" HREF="#SIG:OS_FILE_SYS.A_WRITE:TY">A_WRITE</A>&nbsp;|&nbsp;<A NAME="SIG:OS_FILE_SYS.A_EXEC:TY:SPEC" HREF="#SIG:OS_FILE_SYS.A_EXEC:TY">A_EXEC</A><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.access:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.access:VAL">access</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>*</B>&nbsp;access_mode&nbsp;list&nbsp;<B>-&gt;</B>&nbsp;bool<BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.tmpName:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.tmpName:VAL">tmpName</A>&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;string<BR>
<BR>
<B>eqtype</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.file_id:TY:SPEC" HREF="#SIG:OS_FILE_SYS.file_id:TY">file_id</A><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.fileId:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.fileId:VAL">fileId</A>&nbsp;<B>:</B>&nbsp;string&nbsp;<B>-&gt;</B>&nbsp;file_id<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.hash:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.hash:VAL">hash</A>&nbsp;<B>:</B>&nbsp;file_id&nbsp;<B>-&gt;</B>&nbsp;word<BR>
<B>val</B>&nbsp;<A NAME="SIG:OS_FILE_SYS.compare:VAL:SPEC" HREF="#SIG:OS_FILE_SYS.compare:VAL">compare</A>&nbsp;<B>:</B>&nbsp;file_id&nbsp;<B>*</B>&nbsp;file_id&nbsp;<B>-&gt;</B>&nbsp;order</CODE>
</BLOCKQUOTE>
<H4>Description</H4>
<DL>
<DT> <A NAME="SIG:OS_FILE_SYS.openDir:VAL"></A>
<DT> <CODE>openDir <VAR>path</VAR> </CODE>
<DD>
opens the directory specified by <VAR>path</VAR> and returns  a directory stream for use with <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.readDir:VAL:SPEC">readDir</A></CODE>,  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.rewindDir:VAL:SPEC">rewindDir</A></CODE>, and  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.closeDir:VAL:SPEC">closeDir</A></CODE>.  The stream reads the directory entries off the  file system in some unspecified order.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example,  the directory does not exist or is not accessible. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.readDir:VAL"></A>
<DT> <CODE>readDir <VAR>dir</VAR> </CODE>
<DD>
returns and removes one filename from the directory stream <VAR>dir</VAR>.  When the directory stream is empty (that is, when all entries have  been read from the stream), <CODE><A HREF="option.html#SIG:OPTION.option:TY:SPEC">NONE</A></CODE> is returned.  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.readDir:VAL:SPEC">readDir</A></CODE> filters out the names corresponding  to the current and parent arcs. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.rewindDir:VAL"></A>
<DT> <CODE>rewindDir <VAR>dir</VAR> </CODE>
<DD>
resets the directory stream <VAR>dir</VAR>, as if it  had just been opened.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> in case of an operating system error, though, since the directory stream has already been opened, an error should not be likely. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.closeDir:VAL"></A>
<DT> <CODE>closeDir <VAR>dir</VAR> </CODE>
<DD>
closes the directory stream <VAR>dir</VAR>, releasing  any system resources associated with it.  Any subsequent read or rewind on the stream will raise exception <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE>. Closing  a closed directory stream, however, has no effect. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.chDir:VAL"></A>
<DT> <CODE>chDir <VAR>s</VAR> </CODE>
<DD>
changes the current working directory to <VAR>s</VAR>. This affects future calls to all functions that access the file system.  These include the input/output functions such as <CODE><A HREF="text-io.html#SIG:TEXT_IO.openIn:VAL:SPEC">TextIO.openIn</A></CODE> and <CODE><A HREF="text-io.html#SIG:TEXT_IO.openOut:VAL:SPEC">TextIO.openOut</A></CODE>, and functions defined in this structure.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, the directory does not exist or is not readable.
<P>
The <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.chDir:VAL:SPEC">chDir</A></CODE> function will also change the current volume (on systems with volumes) if one is specified. This function does not allow the user to change the current working directory of another volume than the current volume, even on systems where this concept is otherwise supported. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.getDir:VAL"></A><CODE><B>val</B>&nbsp;getDir&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;string</CODE>
<DD>
          An absolute canonical pathname of the current working directory. This includes the current volume for systems supporting volumes. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.mkDir:VAL"></A>
<DT> <CODE>mkDir <VAR>s</VAR> </CODE>
<DD>
creates a directory <VAR>s</VAR> on the file system. If <VAR>s</VAR> has multiple arcs, each of the ancestor directories will need to be created first, if it does not already exist. <CODE>mkDir</CODE> raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, the directory in which <VAR>s</VAR> is to be created does not exist or is not writable. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.rmDir:VAL"></A>
<DT> <CODE>rmDir <VAR>s</VAR> </CODE>
<DD>
removes directory <VAR>s</VAR> from the file system. It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, <VAR>s</VAR> does not exist or if the directory in which <VAR>s</VAR> resides is not writable, or if the directory is not empty. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.isDir:VAL"></A>
<DT> <CODE>isDir <VAR>s</VAR> </CODE>
<DD>
tests whether <VAR>s</VAR> is a directory.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, <VAR>s</VAR> does not exist or if the directory in which <VAR>s</VAR> resides is not accessible. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.isLink:VAL"></A>
<DT> <CODE>isLink <VAR>s</VAR> </CODE>
<DD>
returns <CODE>true</CODE> if <VAR>s</VAR> names a symbolic link. It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, <VAR>s</VAR> does not exist or there is an access violation. On operating systems without symbolic links, it will always return <CODE>false</CODE> unless an exception is raised first. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.readLink:VAL"></A>
<DT> <CODE>readLink <VAR>s</VAR> </CODE>
<DD>
returns the contents of the symbolic link <VAR>s</VAR>. It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, <VAR>s</VAR> does not exist or is not a symbolic link, or there is an access violation.  On operating systems without symbolic links, it raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> unconditionally. 
<P>
          The precise form of the returned string, in particular, whether it corresponds to an absolute or relative path, is system-dependent. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.fullPath:VAL"></A>
<DT> <CODE>fullPath <VAR>path</VAR> </CODE>
<DD>
returns an absolute  canonical path that names the same file system  object as <VAR>path</VAR>.  The resulting path will have a volume prefix (on systems supporting volumes), all occurrences of the  current, parent, and empty arcs will have been expanded or removed,  and any symbolic links will have been fully expanded. An empty <VAR>path</VAR> is treated as <CODE>&quot;.&quot;</CODE>.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if, for example, a directory on the  path, or the file or directory named, does not exist or is not  accessible or if there is a link loop. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.realPath:VAL"></A>
<DT> <CODE>realPath <VAR>path</VAR> </CODE>
<DD>
returns a  canonical path that names the same file system  object as <VAR>path</VAR>.  If <VAR>path</VAR> is an absolute path, then <CODE>realPath</CODE> acts like <CODE>fullPath</CODE>.  If <VAR>path</VAR> is relative and on the same volume as the current working  directory, then it returns a path that is relative to the current  working directory, but in which the symbolic links have been expanded. Otherwise, it raises <CODE><A HREF="os-path.html#SIG:OS_PATH.Path:EXN:SPEC">OS.Path.Path</A></CODE>.  
<BLOCKQUOTE>
<B>Implementation note:</B><BR>

<P>
This function can be implemented as follows:  
<PRE>
	    fun realPath p = if <A HREF="os-path.html#SIG:OS_PATH.isAbsolute:VAL:SPEC">OS.Path.isAbsolute</A> p
		  then fullPath p
		  else <A HREF="os-path.html#SIG:OS_PATH.mkRelative:VAL:SPEC">OS.Path.mkRelative</A>{
                      path=fullPath p, relativeTo=fullPath(getDir())
                    }
	  
</PRE>
  
</BLOCKQUOTE>
 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.modTime:VAL"></A>
<DT> <CODE>modTime <VAR>path</VAR> </CODE>
<DD>
returns the modification time of file <VAR>path</VAR>.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if,  for example, <VAR>path</VAR> does not exist or if the  directory in which <VAR>path</VAR> resides is not accessible. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.fileSize:VAL"></A>
<DT> <CODE>fileSize <VAR>path</VAR> </CODE>
<DD>
returns the size of file <VAR>path</VAR> in bytes.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if,  for example, <VAR>path</VAR> does not exist or if the  directory in which <VAR>path</VAR> resides is not accessible. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.setTime:VAL"></A>
<DT> <CODE>setTime (<VAR>path</VAR>, <VAR>opt</VAR>) </CODE>
<DD>
sets the modification and access time of file <VAR>path</VAR>.  If <VAR>opt</VAR> is  <CODE><CODE><A HREF="option.html#SIG:OPTION.option:TY:SPEC">SOME</A></CODE>(<VAR>t</VAR>)</CODE>,  then the time <VAR>t</VAR> is used; otherwise the current time  (<I>i.e.</I>, <CODE><CODE><A HREF="time.html#SIG:TIME.now:VAL:SPEC">Time.now</A></CODE>()</CODE>) is used.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if  <VAR>path</VAR> does not exist, the directory in which <VAR>path</VAR>  resides is not accessible, or the user does not have the appropriate  permission. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.remove:VAL"></A>
<DT> <CODE>remove <VAR>path</VAR> </CODE>
<DD>
deletes the file <VAR>path</VAR> from the file system.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if,  <VAR>path</VAR> does not exist or is not  writable, if the directory in which <VAR>path</VAR> resides is not  writable, or <VAR>file</VAR> is a directory.  Use the <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.rmDir:VAL:SPEC">rmDir</A></CODE> function to delete directories. 
<P>
 If one removes a file that has been  opened for reading or writing, the behavior of subsequent reads and  writes is undefined.  For example, removing the file may close all  existing streams or generate an exception.  The Unix idiom of opening a file and then removing it is not portable. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.rename:VAL"></A>
<DT> <CODE>rename {<VAR>old</VAR>, <VAR>new</VAR>} </CODE>
<DD>
changes the name of file <VAR>old</VAR> to <VAR>new</VAR>.  If <VAR>new</VAR> and <VAR>old</VAR> refer to the same file,  <CODE>rename</CODE> does nothing.  If a file called <VAR>new</VAR> exists, it is removed.  It raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE> if,  for example, <VAR>old</VAR> does not exist, or if one of the  directories in which <VAR>old</VAR> or <VAR>new</VAR> reside is not writable.  This may also fail if <VAR>old</VAR> refers to an open file, or if  <VAR>old</VAR> and <VAR>new</VAR> are on different file systems, <I>i.e.</I>, if a copy is required. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.access:VAL"></A>
<DT> <CODE>access (<VAR>path</VAR>, <VAR>accs</VAR>) </CODE>
<DD>
tests the access permissions of file <VAR>path</VAR>,  expanding symbolic links as necessary.  If the list <VAR>accs</VAR> of  required access modes is empty, it tests whether <VAR>path</VAR> exists.  If <VAR>accs</VAR> contains <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.access_mode:TY:SPEC">A_READ</A></CODE>,  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.access_mode:TY:SPEC">A_WRITE</A></CODE>, or  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.access_mode:TY:SPEC">A_EXEC</A></CODE>, respectively, it tests whether  the user process has  read, write, or execute permission for the file, testing their  conjunction if more than one are present.  Note that <CODE>access</CODE> is also  implicitly testing the user's access  to the parent directories of the file.  The function will only raise <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">OS.SysErr</A></CODE>  for errors  unrelated to resolving the pathname and the related permissions,  such as being interrupted by a signal during the system call. 
<BLOCKQUOTE>
<B>Implementation note:</B><BR>

<P>
On systems that do not support a notion of execution permissions, the <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.access:VAL:SPEC">access</A></CODE> should accept but ignore the <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.access_mode:TY:SPEC">A_EXEC</A></CODE> value. 
</BLOCKQUOTE>
 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.tmpName:VAL"></A><CODE><B>val</B>&nbsp;tmpName&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;string</CODE>
<DD>
 This creates a new empty file with a unique name and returns the  full pathname of the file.  The named file will be readable and writable by the creating  process, but, if the host operating systems supports it, not  accessible by other users.  This function can be used to create a temporary file that will  not collide with other applications.  
<P>
 This function raises <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">SysErr</A></CODE>  if it cannot create the unique file or filename. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.file_id:TY"></A><CODE><B>eqtype</B>&nbsp;file_id</CODE>
<DD>
          A unique identifier associated with a file system object. A value of this type is not persistent across changes in the file system (<I>e.g.</I>, mount/unmount) but it is better than pathnames for uniquely identifying files. A <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.file_id:TY:SPEC">file_id</A></CODE> value should not be confused with the open file identifier <CODE><A HREF="os-io.html#SIG:OS_IO.iodesc:TY:SPEC">OS.IO.iodesc</A></CODE>. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.fileId:VAL"></A>
<DT> <CODE>fileId <VAR>path</VAR> </CODE>
<DD>
returns the unique <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.file_id:TY:SPEC">file_id</A></CODE> value associated with the file system object designated by the pathname <VAR>path</VAR>. In particular, if <CODE><CODE>fileId</CODE> <VAR>p</VAR> = <CODE>fileId</CODE> <VAR>p'</VAR></CODE>, then the paths <VAR>p</VAR> and <VAR>p'</VAR> refer to the same file system object.  Note that if <VAR>p</VAR> is a symbolic link, then  <CODE><CODE>fileId</CODE> <VAR>p</VAR> =
	  <CODE>fileId</CODE>(<CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.readLink:VAL:SPEC">readLink</A></CODE> <VAR>p</VAR>)
	  </CODE>. 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.hash:VAL"></A>
<DT> <CODE>hash <VAR>fid</VAR> </CODE>
<DD>
returns a hash value associated with <VAR>fid</VAR>. 
<BLOCKQUOTE>
<B>Implementation note:</B><BR>

<P>
<CODE>hash</CODE> must have the property that values produced are well distributed when taken modulo 2<SUP>(<VAR>n</VAR>)</SUP> for any <VAR>n</VAR>. 
</BLOCKQUOTE>
 
<BR>
<BR>

<DT> <A NAME="SIG:OS_FILE_SYS.compare:VAL"></A>
<DT> <CODE>compare (<VAR>fid</VAR>, <VAR>fid'</VAR>) </CODE>
<DD>
returns <CODE><A HREF="general.html#SIG:GENERAL.order:TY:SPEC">LESS</A></CODE>, <CODE><A HREF="general.html#SIG:GENERAL.order:TY:SPEC">EQUAL</A></CODE>, or <CODE><A HREF="general.html#SIG:GENERAL.order:TY:SPEC">GREATER</A></CODE>  when <VAR>fid</VAR> is less than, equal to, or greater than  <VAR>fid'</VAR>, respectively, in some underlying linear ordering on <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.file_id:TY:SPEC">file_id</A></CODE> values. 
<BR>
<BR>

</DL>
<H4>See Also</H4>
<BLOCKQUOTE>
<CODE><A HREF="bin-io.html#BinIO:STR:SPEC">BinIO</A></CODE>, <CODE><A HREF="os.html#OS:STR:SPEC">OS</A></CODE>, <CODE><A HREF="os.html#SIG:OS.Path:STR:SPEC">OS.Path</A></CODE>, <CODE><A HREF="text-io.html#TextIO:STR:SPEC">TextIO</A></CODE>
</BLOCKQUOTE>
<H4>Discussion</H4>
<P>
For functions dealing with file attributes, such as <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.fileSize:VAL:SPEC">fileSize</A></CODE> or  <CODE><A HREF="os-file-sys.html#SIG:OS_FILE_SYS.rename:VAL:SPEC">rename</A></CODE>, the arguments can be directories as well as ordinary files.


<HR>
<CENTER>
<B>[ <A HREF="#top">Top</A>
   | <A HREF="manpages.html">Parent</A>
   | <A HREF="toc.html">Contents</A>
   | <A HREF="index-all.html">Index</A>
   | <A HREF="index.html">Root</A>
   ]</B>
</CENTER>
<P>
<I>Generated April 12, 2004</I><BR>
<I>Last Modified July 14, 2003</I><BR>
<I>Comments to <A HREF="http://www.cs.uchicago.edu/people/jhr">John Reppy.</A></I><BR>

<HR>
<P>

This document may be distributed freely over the internet as long as the
copyright notice and license terms below are prominently displayed within
every machine-readable copy.  

<P>

<TABLE ALIGN=CENTER WIDTH="80%" BORDER="2" CELLPADDING="5">
<TR>
<TD>
<P>

Copyright &copy; 2004 AT&amp;T and Lucent Technologies.
All rights reserved.

<P>

Permission is granted for internet users to make one paper copy for their
own personal use.  Further hardcopy reproduction is strictly prohibited. 
Permission to distribute the HTML document electronically on any medium
other than the internet must be requested from the copyright holders by
contacting the editors.
Printed versions of the SML Basis Manual are available from Cambridge
University Press.
To order, please visit
<A HREF="http://www.cup.org">www.cup.org</A> (North America) or
<A HREF="http://www.cup.cam.ac.uk">www.cup.cam.ac.uk</A> (outside North America).<BR>

</TABLE>
<P>

<HR>
</BODY></HTML>
