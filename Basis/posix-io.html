<!-- HTML/posix-io.html -->

<!-- COPYRIGHT (c) 1997 Bell Labs, Lucent Technologies. -->

<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>The Posix.IO structure</TITLE>
<META NAME=generator CONTENT="ML-Doc::html-gen">
</HEAD>
<BODY BGCOLOR="#FFFFFF"><A NAME="top"></A>
<H1 align=CENTER>The Standard ML Basis Library</H1>
<HR>


<H2><A NAME="section:0"></A>The <CODE>Posix.IO</CODE> structure</H2>
<HR>
<H4>Synopsis</H4>
<BLOCKQUOTE>
<CODE><B>signature</B>&nbsp;<A NAME="POSIX_IO:SIG:SPEC"></A><CODE>POSIX_IO</CODE><BR>
<B>structure</B>&nbsp;<A NAME="IO:STR:SPEC"></A><CODE>IO</CODE><B> : </B>POSIX_IO<BR>
</CODE>
</BLOCKQUOTE>
<P>
The structure <CODE>Posix.IO</CODE> specifies functions that provide the primitive POSIX input/output operations, as described in Section 6 of the POSIX standard 1003.1,1996<B>[CITE]</B>. 
<HR>
<H4>Interface</H4>
<BLOCKQUOTE>
<CODE><B>eqtype</B>&nbsp;<A NAME="SIG:POSIX_IO.file_desc:TY:SPEC" HREF="#SIG:POSIX_IO.file_desc:TY">file_desc</A><BR>
<B>eqtype</B>&nbsp;<A NAME="SIG:POSIX_IO.pid:TY:SPEC" HREF="#SIG:POSIX_IO.pid:TY">pid</A><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.pipe:VAL:SPEC" HREF="#SIG:POSIX_IO.pipe:VAL">pipe</A>&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;{infd&nbsp;<B>:</B>&nbsp;file_desc,&nbsp;outfd&nbsp;<B>:</B>&nbsp;file_desc}<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.dup:VAL:SPEC" HREF="#SIG:POSIX_IO.dup:VAL">dup</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>-&gt;</B>&nbsp;file_desc<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.dup2:VAL:SPEC" HREF="#SIG:POSIX_IO.dup2:VAL">dup2</A>&nbsp;<B>:</B>&nbsp;{old&nbsp;<B>:</B>&nbsp;file_desc,&nbsp;new&nbsp;<B>:</B>&nbsp;file_desc}&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.close:VAL:SPEC" HREF="#SIG:POSIX_IO.close:VAL">close</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.readVec:VAL:SPEC" HREF="#SIG:POSIX_IO.readVec:VAL">readVec</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;int&nbsp;<B>-&gt;</B>&nbsp;Word8Vector.vector<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.readArr:VAL:SPEC" HREF="#SIG:POSIX_IO.readArr:VAL">readArr</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;Word8ArraySlice.slice&nbsp;<B>-&gt;</B>&nbsp;int<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.writeVec:VAL:SPEC" HREF="#SIG:POSIX_IO.writeVec:VAL">writeVec</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;Word8VectorSlice.slice&nbsp;<B>-&gt;</B>&nbsp;int<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.writeArr:VAL:SPEC" HREF="#SIG:POSIX_IO.writeArr:VAL">writeArr</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;Word8ArraySlice.slice&nbsp;<B>-&gt;</B>&nbsp;int<BR>
<BR>
<B>datatype</B>&nbsp;<A NAME="SIG:POSIX_IO.whence:TY:SPEC" HREF="#SIG:POSIX_IO.whence:TY">whence</A><BR>
&nbsp;&nbsp;=&nbsp;<A NAME="SIG:POSIX_IO.SEEK_SET:TY:SPEC" HREF="#SIG:POSIX_IO.SEEK_SET:TY">SEEK_SET</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.SEEK_CUR:TY:SPEC" HREF="#SIG:POSIX_IO.SEEK_CUR:TY">SEEK_CUR</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.SEEK_END:TY:SPEC" HREF="#SIG:POSIX_IO.SEEK_END:TY">SEEK_END</A><BR>
<BR>
<B>structure</B>&nbsp;FD&nbsp;<B>:</B>&nbsp;<B>sig</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>include</B>&nbsp;<A HREF="bit-flags.html#BIT_FLAGS:SIG:SPEC">BIT_FLAGS</A><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.cloexec:VAL:SPEC" HREF="#SIG:POSIX_IO.cloexec:VAL">cloexec</A>&nbsp;<B>:</B>&nbsp;flags<BR>
&nbsp;&nbsp;<B>end</B><BR>
<BR>
<B>structure</B>&nbsp;O&nbsp;<B>:</B>&nbsp;<B>sig</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>include</B>&nbsp;<A HREF="bit-flags.html#BIT_FLAGS:SIG:SPEC">BIT_FLAGS</A><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.append:VAL:SPEC" HREF="#SIG:POSIX_IO.append:VAL">append</A>&nbsp;<B>:</B>&nbsp;flags<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.nonblock:VAL:SPEC" HREF="#SIG:POSIX_IO.nonblock:VAL">nonblock</A>&nbsp;<B>:</B>&nbsp;flags<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.sync:VAL:SPEC" HREF="#SIG:POSIX_IO.sync:VAL">sync</A>&nbsp;<B>:</B>&nbsp;flags<BR>
&nbsp;&nbsp;<B>end</B><BR>
<BR>
<B>datatype</B>&nbsp;<A NAME="SIG:POSIX_IO.open_mode:TY:SPEC" HREF="#SIG:POSIX_IO.open_mode:TY">open_mode</A><BR>
&nbsp;&nbsp;=&nbsp;<A NAME="SIG:POSIX_IO.O_RDONLY:TY:SPEC" HREF="#SIG:POSIX_IO.O_RDONLY:TY">O_RDONLY</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.O_WRONLY:TY:SPEC" HREF="#SIG:POSIX_IO.O_WRONLY:TY">O_WRONLY</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.O_RDWR:TY:SPEC" HREF="#SIG:POSIX_IO.O_RDWR:TY">O_RDWR</A><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.dupfd:VAL:SPEC" HREF="#SIG:POSIX_IO.dupfd:VAL">dupfd</A>&nbsp;<B>:</B>&nbsp;{old&nbsp;<B>:</B>&nbsp;file_desc,&nbsp;base&nbsp;<B>:</B>&nbsp;file_desc}<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>-&gt;</B>&nbsp;file_desc<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.getfd:VAL:SPEC" HREF="#SIG:POSIX_IO.getfd:VAL">getfd</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>-&gt;</B>&nbsp;FD.flags<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.setfd:VAL:SPEC" HREF="#SIG:POSIX_IO.setfd:VAL">setfd</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;FD.flags&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.getfl:VAL:SPEC" HREF="#SIG:POSIX_IO.getfl:VAL">getfl</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>-&gt;</B>&nbsp;O.flags&nbsp;<B>*</B>&nbsp;open_mode<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.setfl:VAL:SPEC" HREF="#SIG:POSIX_IO.setfl:VAL">setfl</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;O.flags&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.lseek:VAL:SPEC" HREF="#SIG:POSIX_IO.lseek:VAL">lseek</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;Position.int&nbsp;<B>*</B>&nbsp;whence<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.fsync:VAL:SPEC" HREF="#SIG:POSIX_IO.fsync:VAL">fsync</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>-&gt;</B>&nbsp;unit<BR>
<BR>
<B>datatype</B>&nbsp;<A NAME="SIG:POSIX_IO.lock_type:TY:SPEC" HREF="#SIG:POSIX_IO.lock_type:TY">lock_type</A><BR>
&nbsp;&nbsp;=&nbsp;<A NAME="SIG:POSIX_IO.F_RDLCK:TY:SPEC" HREF="#SIG:POSIX_IO.F_RDLCK:TY">F_RDLCK</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.F_WRLCK:TY:SPEC" HREF="#SIG:POSIX_IO.F_WRLCK:TY">F_WRLCK</A><BR>
&nbsp;&nbsp;|&nbsp;<A NAME="SIG:POSIX_IO.F_UNLCK:TY:SPEC" HREF="#SIG:POSIX_IO.F_UNLCK:TY">F_UNLCK</A><BR>
<BR>
<B>structure</B>&nbsp;FLock&nbsp;<B>:</B>&nbsp;<B>sig</B><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>type</B>&nbsp;<A NAME="SIG:POSIX_IO.flock:TY:SPEC" HREF="#SIG:POSIX_IO.flock:TY">flock</A><BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.flock:VAL:SPEC" HREF="#SIG:POSIX_IO.flock:VAL">flock</A>&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ltype&nbsp;<B>:</B>&nbsp;lock_type,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whence&nbsp;<B>:</B>&nbsp;whence,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start&nbsp;<B>:</B>&nbsp;Position.int,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;len&nbsp;<B>:</B>&nbsp;Position.int,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid&nbsp;<B>:</B>&nbsp;pid&nbsp;option<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;flock<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.ltype:VAL:SPEC" HREF="#SIG:POSIX_IO.ltype:VAL">ltype</A>&nbsp;&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;lock_type<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.whence:VAL:SPEC" HREF="#SIG:POSIX_IO.whence:VAL">whence</A>&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;whence<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.start:VAL:SPEC" HREF="#SIG:POSIX_IO.start:VAL">start</A>&nbsp;&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.len:VAL:SPEC" HREF="#SIG:POSIX_IO.len:VAL">len</A>&nbsp;&nbsp;&nbsp;&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.pid:VAL:SPEC" HREF="#SIG:POSIX_IO.pid:VAL">pid</A>&nbsp;&nbsp;&nbsp;&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;pid&nbsp;option<BR>
&nbsp;&nbsp;<B>end</B><BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.getlk:VAL:SPEC" HREF="#SIG:POSIX_IO.getlk:VAL">getlk</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;FLock.flock&nbsp;<B>-&gt;</B>&nbsp;FLock.flock<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.setlk:VAL:SPEC" HREF="#SIG:POSIX_IO.setlk:VAL">setlk</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;FLock.flock&nbsp;<B>-&gt;</B>&nbsp;FLock.flock<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.setlkw:VAL:SPEC" HREF="#SIG:POSIX_IO.setlkw:VAL">setlkw</A>&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;FLock.flock&nbsp;<B>-&gt;</B>&nbsp;FLock.flock<BR>
<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.mkBinReader:VAL:SPEC" HREF="#SIG:POSIX_IO.mkBinReader:VAL">mkBinReader</A>&nbsp;&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;BinPrimIO.reader<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.mkTextReader:VAL:SPEC" HREF="#SIG:POSIX_IO.mkTextReader:VAL">mkTextReader</A>&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;TextPrimIO.reader<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.mkBinWriter:VAL:SPEC" HREF="#SIG:POSIX_IO.mkBinWriter:VAL">mkBinWriter</A>&nbsp;&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunkSize&nbsp;<B>:</B>&nbsp;int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;BinPrimIO.writer<BR>
<B>val</B>&nbsp;<A NAME="SIG:POSIX_IO.mkTextWriter:VAL:SPEC" HREF="#SIG:POSIX_IO.mkTextWriter:VAL">mkTextWriter</A>&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunkSize&nbsp;<B>:</B>&nbsp;int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;TextPrimIO.writer</CODE>
</BLOCKQUOTE>
<H4>Description</H4>
<DL>
<DT> <A NAME="SIG:POSIX_IO.file_desc:TY"></A><CODE><B>eqtype</B>&nbsp;file_desc</CODE>
<DD>
 Open file descriptor. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.pid:TY"></A><CODE><B>eqtype</B>&nbsp;pid</CODE>
<DD>
 A process ID, used as an identifier for an operating system process. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.pipe:VAL"></A><CODE><B>val</B>&nbsp;pipe&nbsp;<B>:</B>&nbsp;unit&nbsp;<B>-&gt;</B>&nbsp;{infd&nbsp;<B>:</B>&nbsp;file_desc,&nbsp;outfd&nbsp;<B>:</B>&nbsp;file_desc}</CODE>
<DD>
      This creates a pipe (channel) and returns two file descriptors that  refer to the read (<VAR>infd</VAR>) and write (<VAR>outfd</VAR>)  ends of the pipe. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.dup:VAL"></A>
<DT> <CODE>dup <VAR>fd</VAR> </CODE>
<DD>
returns a new file descriptor that refers to the same  open file, with the same file pointer and access mode, as <VAR>fd</VAR>. The underlying word (see <CODE><A HREF="posix-file-sys.html#SIG:POSIX_FILE_SYS.fdToWord:VAL:SPEC">Posix.FileSys.fdToWord</A></CODE>) of the returned file descriptor is the lowest one available. It is equivalent to <CODE><CODE><A HREF="posix-io.html#SIG:POSIX_IO.dupfd:VAL:SPEC">dupfd</A></CODE> {<VAR>old</VAR>=<VAR>fd</VAR>, <VAR>base</VAR>=<CODE><A HREF="posix-file-sys.html#SIG:POSIX_FILE_SYS.wordToFD:VAL:SPEC">Posix.FileSys.wordToFD</A></CODE> 0w0}</CODE>. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.dup2:VAL"></A>
<DT> <CODE>dup2 {<VAR>old</VAR>, <VAR>new</VAR>} </CODE>
<DD>
duplicates the open file descriptor <VAR>old</VAR> as  file descriptor <VAR>new</VAR>. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.close:VAL"></A>
<DT> <CODE>close <VAR>fd</VAR> </CODE>
<DD>
closes the file descriptor <VAR>fd</VAR>. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.readVec:VAL"></A>
<DT> <CODE>readVec (<VAR>fd</VAR>, <VAR>n</VAR>) </CODE>
<DD>
reads at most <VAR>n</VAR> bytes from the file referred to by <VAR>fd</VAR>.  The size of the resulting vector is the number of  bytes that were successfully read, which may be less than <VAR>n</VAR>.  This function returns the empty vector if  end-of-stream is detected (or if <VAR>n</VAR>  is <CODE>0</CODE>).  It raises the <CODE><A HREF="general.html#SIG:GENERAL.Size:EXN:SPEC">Size</A></CODE> exception if  <VAR>n</VAR> &lt; 0. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.readArr:VAL"></A>
<DT> <CODE>readArr (<VAR>fd</VAR>, <VAR>slice</VAR>) </CODE>
<DD>
 reads bytes from the file specified by <VAR>fd</VAR> into the array slice  <VAR>slice</VAR> and returns the number of bytes actually read. The end-of-file condition is marked by returning <CODE>0</CODE>,  although <CODE>0</CODE> is also returned if the <VAR>slice</VAR> is empty.  This function will raise <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">OS.SysErr</A></CODE> if there is  some problem with the underlying system call (<I>e.g.</I>, the file is  closed). 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.writeVec:VAL"></A>
<DT> <CODE>writeVec (<VAR>fd</VAR>, <VAR>slice</VAR>) </CODE>
<DT> <CODE>          writeArr (<VAR>fd</VAR>, <VAR>slice</VAR>) </CODE>
<DD>
 These functions write the bytes the vector or array slice <VAR>slice</VAR>  to the open file <VAR>fd</VAR>.  Both functions return the number bytes actually written and  will raise <CODE><A HREF="os.html#SIG:OS.SysErr:EXN:SPEC">OS.SysErr</A></CODE> if there is  some problem with the underlying system call (<I>e.g.</I>, the file is  closed or there is insufficient disk space). 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.FD:STR"></A>
<DT> <CODE><B>structure</B>&nbsp;FD</CODE>
<DD>
<BR>

<DL>
<DT> <A NAME="SIG:POSIX_IO.FD.cloexec:VAL"></A><CODE><B>val</B>&nbsp;cloexec&nbsp;<B>:</B>&nbsp;flags</CODE>
<DD>
      File descriptor flag that, if set,  will cause the file descriptor to be closed should the opening process replace itself  (through <CODE>exec</CODE>, etc.).  If <CODE>cloexec</CODE> is not  set, the open file descriptor will be inherited  by the new process. 
<BR>
<BR>

</DL>
<DT> <A NAME="SIG:POSIX_IO.O:STR"></A>
<DT> <CODE><B>structure</B>&nbsp;O</CODE>
<DD>
<BR>

<DL>
<DT> <A NAME="SIG:POSIX_IO.O.append:VAL"></A><CODE><B>val</B>&nbsp;append&nbsp;<B>:</B>&nbsp;flags</CODE>
<DD>
              File status flag which forces the file offset to be  set to the end of the file prior to each write. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.O.nonblock:VAL"></A><CODE><B>val</B>&nbsp;nonblock&nbsp;<B>:</B>&nbsp;flags</CODE>
<DD>
              File status flag used to enable non-blocking I/O. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.O.sync:VAL"></A><CODE><B>val</B>&nbsp;sync&nbsp;<B>:</B>&nbsp;flags</CODE>
<DD>
              File status flag enabling writes using  ``synchronized I/O file integrity completion.'' 
<BR>
<BR>

</DL>
<DT> <A NAME="SIG:POSIX_IO.open_mode:TY"></A>
<DT> <CODE><B>datatype</B>&nbsp;open_mode</CODE>
<DD>
    Operations allowed on an open file. 
<BR>

<DL>
<DT> <CODE>=&nbsp;O_RDONLY</CODE>
<DD>
 Open a file for reading only. 
<BR>
<BR>

<DT> <CODE>|&nbsp;O_WRONLY</CODE>
<DD>
 Open a file for writing only. 
<BR>
<BR>

<DT> <CODE>|&nbsp;O_RDWR</CODE>
<DD>
 Open a file for reading and writing. 
<BR>
<BR>

</DL>
<DT> <A NAME="SIG:POSIX_IO.dupfd:VAL"></A>
<DT> <CODE>dupfd {<VAR>old</VAR>, <VAR>base</VAR>} </CODE>
<DD>
returns a new file descriptor bound to <VAR>old</VAR>. The returned descriptor is greater than or equal to the file descriptor <VAR>base</VAR> based on the underlying integer mapping defined by <CODE><A HREF="posix-file-sys.html#SIG:POSIX_FILE_SYS.fdToWord:VAL:SPEC">Posix.FileSys.fdToWord</A></CODE> and  <CODE><A HREF="posix-file-sys.html#SIG:POSIX_FILE_SYS.wordToFD:VAL:SPEC">Posix.FileSys.wordToFD</A></CODE>. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_DUPFD</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.getfd:VAL"></A>
<DT> <CODE>getfd <VAR>fd</VAR> </CODE>
<DD>
gets the file descriptor flags associated with <VAR>fd</VAR>. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_GETFD</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.setfd:VAL"></A>
<DT> <CODE>setfd (<VAR>fd</VAR>, <VAR>fl</VAR>) </CODE>
<DD>
sets the flags of file descriptor <VAR>fd</VAR> to <VAR>fl</VAR>. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_SETFD</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.getfl:VAL"></A>
<DT> <CODE>getfl <VAR>fd</VAR> </CODE>
<DD>
gets the file status flags for the open file descriptor <VAR>fd</VAR> and the access mode in which the file was opened. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_GETFL</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.setfl:VAL"></A>
<DT> <CODE>setfl (<VAR>fd</VAR>, <VAR>fl</VAR>) </CODE>
<DD>
sets the file status flags for the open file descriptor <VAR>fd</VAR>  to <VAR>fl</VAR>. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_SETFL</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.lseek:VAL"></A>
<DT> <CODE>lseek (<VAR>fd</VAR>, <VAR>off</VAR>, <VAR>wh</VAR>) </CODE>
<DD>
sets the file offset for the open file descriptor <VAR>fd</VAR> to  <VAR>off</VAR> if <VAR>wh</VAR> is <CODE><A HREF="posix-io.html#SIG:POSIX_IO.whence:TY:SPEC">SEEK_SET</A></CODE>;  to its current value  plus <VAR>off</VAR> bytes if <VAR>wh</VAR> is <CODE><A HREF="posix-io.html#SIG:POSIX_IO.whence:TY:SPEC">SEEK_CUR</A></CODE>;  or, to the size of the file plus <VAR>off</VAR> bytes if  <VAR>wh</VAR> is <CODE><A HREF="posix-io.html#SIG:POSIX_IO.whence:TY:SPEC">SEEK_END</A></CODE>. Note that <VAR>off</VAR> may be negative. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.fsync:VAL"></A>
<DT> <CODE>fsync <VAR>fd</VAR> </CODE>
<DD>
indicates that all data for the open file descriptor <VAR>fd</VAR>  is to be transferred to the device associated with the descriptor;  it is similar to a ``flush'' operation. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.lock_type:TY"></A><CODE><B>datatype</B>&nbsp;lock_type<BR>
&nbsp;&nbsp;=&nbsp;F_RDLCK<BR>
&nbsp;&nbsp;|&nbsp;F_WRLCK<BR>
&nbsp;&nbsp;|&nbsp;F_UNLCK</CODE>
<DD>
     These constructors denote the kind of lock. <CODE><A HREF="posix-io.html#SIG:POSIX_IO.lock_type:TY:SPEC">F_RDLCK</A></CODE> indicates a shared or read lock. <CODE><A HREF="posix-io.html#SIG:POSIX_IO.lock_type:TY:SPEC">F_WRLCK</A></CODE> indicates an exclusive or write lock. <CODE><A HREF="posix-io.html#SIG:POSIX_IO.lock_type:TY:SPEC">F_WRLCK</A></CODE> indicates a lock is unlocked or inactive. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.FLock:STR"></A>
<DT> <CODE><B>structure</B>&nbsp;FLock</CODE>
<DD>
<BR>

<DL>
<DT> <A NAME="SIG:POSIX_IO.FLock.flock:TY"></A><CODE><B>type</B>&nbsp;flock</CODE>
<DD>
Type representing an advisory lock. It can be considered an abstraction of the record used as the argument to the <CODE><A HREF="posix-io.html#SIG:POSIX_IO.FLock.flock:VAL:SPEC">flock</A></CODE> function below. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.FLock.flock:VAL"></A>
<DT> <CODE>flock {<VAR>ltype</VAR>, <VAR>whence</VAR>, <VAR>start</VAR>, <VAR>len</VAR>, <VAR>pid</VAR>} </CODE>
<DD>
creates a <CODE><A HREF="posix-io.html#SIG:POSIX_IO.FLock.flock:TY:SPEC">flock</A></CODE> value described by the parameters. The <VAR>whence</VAR> and <VAR>start</VAR> parameters give the beginning file position as in <CODE><A HREF="posix-io.html#SIG:POSIX_IO.lseek:VAL:SPEC">lseek</A></CODE>. The <VAR>len</VAR> value provides the number of bytes to be locked. If the section starts at the beginning of the file and <CODE><VAR>len</VAR> = 0</CODE>, then the entire file is locked. Normally, <VAR>pid</VAR> will be <CODE><A HREF="option.html#SIG:OPTION.option:TY:SPEC">NONE</A></CODE>. This value is only used in a <CODE><A HREF="posix-io.html#SIG:POSIX_IO.FLock.flock:TY:SPEC">flock</A></CODE> returned by <CODE><A HREF="posix-io.html#SIG:POSIX_IO.getlk:VAL:SPEC">getlk</A></CODE>. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.FLock.ltype:VAL"></A><CODE><B>val</B>&nbsp;ltype&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;lock_type<BR>
<B>val</B>&nbsp;whence&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;whence<BR>
<B>val</B>&nbsp;start&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
<B>val</B>&nbsp;len&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;Position.int<BR>
<B>val</B>&nbsp;pid&nbsp;<B>:</B>&nbsp;flock&nbsp;<B>-&gt;</B>&nbsp;pid&nbsp;option</CODE>
<DD>
         These are projection functions for the fields composing a <CODE><A HREF="posix-io.html#SIG:POSIX_IO.FLock.flock:TY:SPEC">flock</A></CODE> value. 
<BR>
<BR>

</DL>
<DT> <A NAME="SIG:POSIX_IO.getlk:VAL"></A>
<DT> <CODE>getlk (<VAR>fd</VAR>, <VAR>fl</VAR>) </CODE>
<DD>
gets the first lock that blocks the lock description <VAR>fl</VAR> on  the open file descriptor <VAR>fd</VAR>. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_GETLK</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.setlk:VAL"></A>
<DT> <CODE>setlk (<VAR>fd</VAR>, <VAR>fl</VAR>) </CODE>
<DD>
sets or clears a file segment lock according to the  lock description <VAR>fl</VAR> on  the open file descriptor <VAR>fd</VAR>. An exception is raised immediately if a shared or exclusive lock cannot be set. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_SETLK</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.setlkw:VAL"></A><CODE><B>val</B>&nbsp;setlkw&nbsp;<B>:</B>&nbsp;file_desc&nbsp;<B>*</B>&nbsp;FLock.flock&nbsp;<B>-&gt;</B>&nbsp;FLock.flock</CODE>
<DD>
         This is similar to the <CODE><A HREF="posix-io.html#SIG:POSIX_IO.setlk:VAL:SPEC">setlk</A></CODE> function above except that  <CODE><A HREF="posix-io.html#SIG:POSIX_IO.setlkw:VAL:SPEC">setlkw</A></CODE> waits on blocked locks until they are released. It corresponds to the POSIX <CODE>fcntl</CODE> function with the  <CODE>F_SETLKW</CODE> command. 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.mkBinReader:VAL"></A><CODE><B>val</B>&nbsp;mkBinReader&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;BinPrimIO.reader<BR>
<B>val</B>&nbsp;mkTextReader&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;TextPrimIO.reader</CODE>
<DD>
    These functions convert an open POSIX file descriptor into a reader.  From this, one can then construct an input stream.  The functions are comparable to the POSIX function <CODE>fdopen</CODE>. 
<P>
        The argument fields have the following meanings: 
<DL>
<DT>  <CODE>fd</CODE>
<DD>
A file descriptor for a file opened for reading. 
<DT>  <CODE>name</CODE>
<DD>
The name associated with the file, used in error messages shown to the user. 
<DT>  <CODE>initBlkMode</CODE>
<DD>
False if the file is currently in non-blocking mode, <I>i.e.</I>, if the flag <CODE>O.nonblock</CODE> is set in <CODE>#1(getfl fd)</CODE>. 
</DL>
 
<BR>
<BR>

<DT> <A NAME="SIG:POSIX_IO.mkBinWriter:VAL"></A><CODE><B>val</B>&nbsp;mkBinWriter&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunkSize&nbsp;<B>:</B>&nbsp;int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;BinPrimIO.writer<BR>
<B>val</B>&nbsp;mkTextWriter&nbsp;<B>:</B>&nbsp;{<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd&nbsp;<B>:</B>&nbsp;file_desc,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;<B>:</B>&nbsp;string,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appendMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initBlkMode&nbsp;<B>:</B>&nbsp;bool,<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chunkSize&nbsp;<B>:</B>&nbsp;int<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<B>-&gt;</B>&nbsp;TextPrimIO.writer</CODE>
<DD>
    These functions convert an open POSIX file descriptor into a writer.  From this, one can then construct an output stream.  The functions are comparable to the POSIX function <CODE>fdopen</CODE>. 
<P>
        The argument fields have the following meanings: 
<DL>
<DT>  <CODE>fd</CODE>
<DD>
A file descriptor for a file opened for writing. 
<DT>  <CODE>name</CODE>
<DD>
The name associated with the file, used in error messages shown to the user. 
<DT>  <CODE>initBlkMode</CODE>
<DD>
False if the file is currently in non-blocking mode, <I>i.e.</I>, if the flag <CODE>O.nonblock</CODE> is set in <CODE>#1(getfl fd)</CODE>. 
<DT>  <CODE>appendMode</CODE>
<DD>
True if the file is in append mode, <I>i.e.</I>, if the flag <CODE>O.append</CODE> is set in <CODE>#1(getfl fd)</CODE>. 
<DT>  <CODE>chunkSize</CODE>
<DD>
The recommended size of write operations for efficient writing. 
</DL>
 
<BR>
<BR>

</DL>
<H4>See Also</H4>
<BLOCKQUOTE>
<CODE><A HREF="bit-flags.html#BIT_FLAGS:SIG:SPEC">BIT_FLAGS</A></CODE>, <CODE><A HREF="os.html#SIG:OS.IO:STR:SPEC">OS.IO</A></CODE>, <CODE><A HREF="posix.html#Posix:STR:SPEC">Posix</A></CODE>, <CODE><A HREF="posix.html#SIG:POSIX.Error:STR:SPEC">Posix.Error</A></CODE>, <CODE><A HREF="posix.html#SIG:POSIX.FileSys:STR:SPEC">Posix.FileSys</A></CODE>, <CODE><A HREF="posix.html#SIG:POSIX.IO:STR:SPEC">Posix.IO</A></CODE>
</BLOCKQUOTE>
<H4>Discussion</H4>
<BLOCKQUOTE>
<B>Question:</B><BR>

<P>
Why don't mk*Reader allow a chunkSize parameter? Or why do mk*Writer allow this?
</BLOCKQUOTE>


<HR>
<CENTER>
<B>[ <A HREF="#top">Top</A>
   | <A HREF="manpages.html">Parent</A>
   | <A HREF="toc.html">Contents</A>
   | <A HREF="index-all.html">Index</A>
   | <A HREF="index.html">Root</A>
   ]</B>
</CENTER>
<P>
<I>Generated April 12, 2004</I><BR>
<I>Last Modified July 1, 2002</I><BR>
<I>Comments to <A HREF="http://www.cs.uchicago.edu/people/jhr">John Reppy.</A></I><BR>

<HR>
<P>

This document may be distributed freely over the internet as long as the
copyright notice and license terms below are prominently displayed within
every machine-readable copy.  

<P>

<TABLE ALIGN=CENTER WIDTH="80%" BORDER="2" CELLPADDING="5">
<TR>
<TD>
<P>

Copyright &copy; 2004 AT&amp;T and Lucent Technologies.
All rights reserved.

<P>

Permission is granted for internet users to make one paper copy for their
own personal use.  Further hardcopy reproduction is strictly prohibited. 
Permission to distribute the HTML document electronically on any medium
other than the internet must be requested from the copyright holders by
contacting the editors.
Printed versions of the SML Basis Manual are available from Cambridge
University Press.
To order, please visit
<A HREF="http://www.cup.org">www.cup.org</A> (North America) or
<A HREF="http://www.cup.cam.ac.uk">www.cup.cam.ac.uk</A> (outside North America).<BR>

</TABLE>
<P>

<HR>
</BODY></HTML>
